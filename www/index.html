<!DOCTYPE html>
<html>
<head>
	<title>Bluetooth Test</title>
</head>
<body>
	<div class="app">
		<div id="ui">
			<button onclick="listar_dispositivos();">Listar Dispositivos</button>
		</div>
	<div id="message">Hello.</div>
	</div>
	<script type="text/javascript" src="cordova.js"></script>
	<!--script type="text/javascript" src="js/index.js"></script-->
	<script>
		// app.initialize();
		
	document.addEventListener('deviceready', init, false);	
		
	var init = function(){
		bluetoothle.initialize(function(){
			listar_dispositivos();
		}, function(){
			display('Error, debe encender el Bluetooth para iniciar. <a href="javascript:init();"> Reintentar </a>');
		});
	}
		
	function listar_dispositivos(){
		bluetoothle.startScan(function(data){
			display(JSON.stringify(data));
		}, function(){
			display('No se ha podido listar los dispositivos.');
		});
	}

	function display(message){
		var display = document.getElementById("message"), // the message div
            lineBreak = document.createElement("br"),     // a line break
            label = document.createTextNode(message);     // create the label

        display.appendChild(lineBreak);          // add a line break
        display.appendChild(label);              // add the message node
	}
		
	</script>
</body>
</html>